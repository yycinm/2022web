<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ajax07_kakao</title>
    <link rel="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"
        integrity="sha512-odNmoc1XJy5x1TMVMdC7EMs3IVdItLPlCeL5vSUPN2llYKMJ2eByTTAIiiuqLg+GdNr9hF6z81p27DArRFKT7A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <style>
            html,body{height: 100%;}
            li{list-style: none;}
            a{
                text-decoration: none;
                color: #333;
            }
            .card{padding: 50px;border: 1px solid rgb(233, 232, 232);
                 _height: 100%;}
            .search{}
            .search .inp-search{
                width: 300px;height: 30px;margin-right: 30px;
            }
           .btn{height: 30px;width: 50px;background: rgb(247, 247, 97);border: 1px solid yellow;box-shadow: rgba(0.0.0.0.5); }
           .list li{
            display: flex;
           }

        </style>
</head>
<body>
    <div class="card">

        <div class="search">
            <input type="text" class="inp-search" placeholder="search">
            <button class="btn">검색</button>
        </div>
        <ul class="list">
        </ul>
    </div>
<script>
    sSearch("코로나")
    function sSearch(loc){

        axios
            .get("https://dapi.kakao.com/v2/search/web?query="+loc+"&sort=recency&size=10",
            {
                headers:{Authorization: 'KakaoAK 64d684f5b432c13309bfdd37e355f946'} //kakao개발자사이트>>검색>개발가이드>rest테스트>밑에 요청코드보기에 있음
            })
            .then(onResult)
            .catch();
    }
        
        function onResult(v){
      
        let list="";

        for(i=1;i<v.data.documents.length;i++){
            list += `<li>
                        <a href="${v.data.documents[i].url}">
                            <h4>${i}.${v.data.documents[i].title}</h4>
                        </a>
                    </li>`

        }
        $(".list").html(list)
    }  
    function onError(error){
        console.log("error")
    }

    
    $(".btn").click(function(){
        let value =$(".inp-search").val()
        if(value == ""){
            alert("검색어를 입력하세요")
        }else{

            sSearch(value)
            $(".inp-search").val("").focus()
            console.log(value)
        }
        value =""
    })

    $(".search").keyup(function(e){
        if(e.key == "Enter"){
            let value =$(".inp-search").val();
            if(value == ""){
            alert("검색어를 입력하세요")
        }else{

            sSearch(value)
            $(".inp-search").val("").focus()
            console.log(value)
        }
        }
        value =""
    })



</script>
</body>
</html>